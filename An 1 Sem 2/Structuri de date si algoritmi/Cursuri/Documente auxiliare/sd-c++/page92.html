<HTML>
<HEAD>
<TITLE>Destructor and Purge Member Function</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="cover75.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/cover75.gif" alt="Logo" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in C++</b><br>
<A NAME="tex2html3046" HREF="page93.html" tppabs="http://www.brpreiss.com/books/opus4/html/page93.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/next_motif.gif"></A> <A NAME="tex2html3044" HREF="page88.html" tppabs="http://www.brpreiss.com/books/opus4/html/page88.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/up_motif.gif"></A> <A NAME="tex2html3038" HREF="page91.html" tppabs="http://www.brpreiss.com/books/opus4/html/page91.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/previous_motif.gif"></A> <A NAME="tex2html3048" HREF="page9.html" tppabs="http://www.brpreiss.com/books/opus4/html/page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/contents_motif.gif"></A> <A NAME="tex2html3049" HREF="page620.html" tppabs="http://www.brpreiss.com/books/opus4/html/page620.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="index_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION005240000000000000000">Destructor and <tt>Purge</tt> Member Function</A></H2>
<P>
Program&nbsp;<A HREF="page92.html#proglinklist2c" tppabs="http://www.brpreiss.com/books/opus4/html/page92.html#proglinklist2c"><IMG  ALIGN=BOTTOM ALT="gif" SRC="cross_ref_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/cross_ref_motif.gif"></A> gives the code
for the destructor and the <tt>Purge</tt> member function
of the <tt>LinkedList&lt;T&gt;</tt> class.
In the general case,
when the destructor is invoked,
we cannot expect the list to be empty.
Therefore, it is the responsibility of the destructor
to first release any <tt>ListElement&lt;T&gt;</tt>s
which have been allocated and linked into the list.
And this is precisely what the <tt>Purge</tt> member function does.
<P>
<P><A NAME="3825">&#160;</A><A NAME="proglinklist2c">&#160;</A> <IMG WIDTH=575 HEIGHT=297 ALIGN=BOTTOM ALT="program3560" SRC="img623.gif" tppabs="http://www.brpreiss.com/books/opus4/html/img623.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>LinkedList&lt;T&gt;</tt> Class Destructor 	and <tt>Purge</tt> Member Function Definitions<BR>
<P>
<P>
The main loop of the <tt>Purge</tt> function simply traverses
all the elements of linked list,
deleting each of them one-by-one.
Note that the body of the loop has been carefully
written so as to determine the new value of <tt>head</tt>,
before deleting the current list element.
E.g., the following loop body is the <em>wrong</em> way to do it:
<PRE>while (head != 0)
{
    delete head;
    head = head-&gt;next; // Wrong.  Don't do this.
}</PRE>
The problem with the code fragment above is that
the <tt>head</tt> pointer is dereferenced <em>after</em> the object to
which it points has been deleted.
While this code might actually work fortuitously for some compilers
on some machines under some operating systems,
it is invalid and illegal.
<P>
<HR><A NAME="tex2html3046" HREF="page93.html" tppabs="http://www.brpreiss.com/books/opus4/html/page93.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="next_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/next_motif.gif"></A> <A NAME="tex2html3044" HREF="page88.html" tppabs="http://www.brpreiss.com/books/opus4/html/page88.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="up_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/up_motif.gif"></A> <A NAME="tex2html3038" HREF="page91.html" tppabs="http://www.brpreiss.com/books/opus4/html/page91.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="previous_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/previous_motif.gif"></A> <A NAME="tex2html3048" HREF="page9.html" tppabs="http://www.brpreiss.com/books/opus4/html/page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="contents_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/contents_motif.gif"></A> <A NAME="tex2html3049" HREF="page620.html" tppabs="http://www.brpreiss.com/books/opus4/html/page620.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="index_motif.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/index_motif.gif"></A> <P><ADDRESS>
<img src="bruno.gif" tppabs="http://www.brpreiss.com/books/opus4/icons/bruno.gif" alt="Bruno" align=right>
<a href="copyright.html" tppabs="http://www.brpreiss.com/books/opus4/copyright.html">Copyright &#169; 1997</a> by <a href="signature.html" tppabs="http://www.brpreiss.com/books/opus4/signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>

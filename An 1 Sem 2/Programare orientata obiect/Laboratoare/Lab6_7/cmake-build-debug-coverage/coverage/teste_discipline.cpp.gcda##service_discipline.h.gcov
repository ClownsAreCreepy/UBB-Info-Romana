        -:    0:Source:D:/C,C++/CLion 2024.3.4/Projects/Lab6_7/Service/service_discipline.h
        -:    0:Graph:D:\C,C++\CLion 2024.3.4\Projects\Lab6_7\cmake-build-debug-coverage\CMakeFiles\Lab6_7.dir\Test\teste_discipline.cpp.gcno
        -:    0:Data:D:\C,C++\CLion 2024.3.4\Projects\Lab6_7\cmake-build-debug-coverage\CMakeFiles\Lab6_7.dir\Test\teste_discipline.cpp.gcda
        -:    0:Runs:1
        -:    1:#pragma once
        -:    2:#include "../Contract/contract_discipline.h"
        -:    3:#include "../DTO/dto_discipline.h"
        -:    4:#include "../Undo/undo_discipline.h"
        -:    5:#include <unordered_map>
        -:    6:#include <memory>
        -:    7:
        -:    8:using std::unordered_map;
        -:    9:using std::ranges::copy_if;
        -:   10:using std::ranges::sort;
        -:   11:using std::back_inserter;
        -:   12:using std::unique_ptr;
        -:   13:using std::make_unique;
        -:   14:
        -:   15:
        -:   16:/**
        -:   17: * Clasa de service pentru repositor-ul de discipline
        -:   18: * Clasa contine o referinta la repository-ul pe care il controleaza
        -:   19: */
        -:   20:class ServiceDisciplina {
        -:   21:private:
        -:   22:    IRepoDisciplina &repo;
        -:   23:    ContractStudii contract;
        -:   24:    vector<unique_ptr<ActiuneUndo>> undoList;
        -:   25:
        -:   26:public:
        -:   27:    /**
        -:   28:     * Constructor pentru declararea initializata a service-ului
        -:   29:     * @param repository un repository
        -:   30:     */
function _ZN17ServiceDisciplinaC1ER15IRepoDisciplina called 0 returned 0% blocks executed 0%
    #####:   31:    explicit ServiceDisciplina(IRepoDisciplina &repository): repo{repository} {}
    %%%%%:   31-block  0
call    0 never executed
call    1 never executed
        -:   32:
        -:   33:    /**
        -:   34:     * Constructor de copiere
        -:   35:     * Creeaza o copie a service-ului
        -:   36:     * @param ot un alt service
        -:   37:     */
        -:   38:    ServiceDisciplina(ServiceDisciplina &ot) = delete;
        -:   39:
        -:   40:    /**
        -:   41:     * Operator de copiere
        -:   42:     * Creeaza o copie a service-ului
        -:   43:     */
        -:   44:    ServiceDisciplina &operator=(const ServiceDisciplina &) = delete;
        -:   45:
        -:   46:
        -:   47:    /**
        -:   48:     * Functia valideaza disciplina, apoi o adauga in repository daca totul e ok
        -:   49:     * @param nume numele disciplinei
        -:   50:     * @param ore numarul de ore pe saptamana
        -:   51:     * @param tip tipul disciplinei
        -:   52:     * @param profesor numele profesorului principal al disciplinei
        -:   53:     * @throw ValidationException cu mesajul
        -:   54:     *      - "Numele nu poate fi gol!\n", daca numele disciplinei e gol
        -:   55:     *      - "Numarul de ore trebuie sa fie pozitiv!\n", daca numarul de ore a disciplinei este negativ
        -:   56:     *      - "Tipul poate fi doar 'Uman', 'Real' sau '??'!\n", daca tipul nu este {Uman, Real, ??}
        -:   57:     *      - "Profesorul nu poate fi gol", daca numele profesorului este gol
        -:   58:     *@throw RepoException cu mesajul
        -:   59:     *      -"Disciplina exista deja!", daca disciplina exista deja in repository
        -:   60:     */
        -:   61:    void adauga_service(const string &nume, int ore, const string &tip, const string &profesor);
        -:   62:
        -:   63:    /**
        -:   64:     * Functia valideaza index-ul si disciplina, apoi o modifica daca totul e ok
        -:   65:     * @param index pozitia elementului care va fi modificat
        -:   66:     * @param nume_nou numele nou al disciplinei
        -:   67:     * @param ora_noua numarul de ore nou pe saptamana
        -:   68:     * @param tip_nou tipul nou al disciplinei
        -:   69:     * @param profesor_nou numele profesorului principal nou al disciplinei
        -:   70:     * @throw RepoException cu mesajul
        -:   71:     *      -"Elementele sunt doar pe pozitii pozitive!", daca index-ul este negativ
        -:   72:     *      -"Disciplina nu a fost gasita!", daca index-ul este mai mare decat maxim
        -:   73:     *      -"Disciplina exista deja!", daca disciplina noua exista deja in repository
        -:   74:     * @throw ValidationException cu mesajul
        -:   75:     *      - "Numele nu poate fi gol!\n", daca numele disciplinei e gol
        -:   76:     *      - "Numarul de ore trebuie sa fie pozitiv!\n", daca numarul de ore a disciplinei este negativ
        -:   77:     *      - "Tipul poate fi doar 'Uman', 'Real' sau '??'!\n", daca tipul nu este {Uman, Real, ??}
        -:   78:     *      - "Profesorul nu poate fi gol", daca numele profesorului este gol
        -:   79:     */
        -:   80:    void modifica_service(int index, const string &nume_nou, int ora_noua, const string &tip_nou, const string &profesor_nou);
        -:   81:
        -:   82:    /**
        -:   83:     * Functia valideaza index-ul, apoi o sterge din repository daca totul e ok
        -:   84:     * @param index pozitia elementului care va fi sters
        -:   85:     * @throw RepoException cu mesajul
        -:   86:     *      -"Elementele sunt doar pe pozitii pozitive!", daca index-ul este negativ
        -:   87:     *      -"Disciplina nu a fost gasita!", daca index-ul este mai mare decat maxim
        -:   88:     */
        -:   89:    void sterge_service(int index);
        -:   90:
        -:   91:    /**
        -:   92:     * Functia returneaza elementul de pe pozitia index
        -:   93:     * @param index pozitia elementului care va fi sters
        -:   94:     * @return disciplina de pe pozitia index
        -:   95:     * @throw RepoException cu mesajul
        -:   96:     *      -"Elementele sunt doar pe pozitii pozitive!", daca index-ul este negativ
        -:   97:     *      -"Disciplina nu a fost gasita!", daca index-ul este mai mare decat maxim
        -:   98:     */
        -:   99:    const Disciplina &cauta_service(int index) const;
        -:  100:
        -:  101:    /**
        -:  102:     * Functia returneaza intregul repository sub forma de vector
        -:  103:     * @return intregul repository sub forma de vector
        -:  104:     */
        -:  105:    [[nodiscard]] const vector<Disciplina> &getAll() const noexcept;
        -:  106:
        -:  107:
        -:  108:    /**
        -:  109:     * Functia creeaza un raport a frecventei tipurilor in repository
        -:  110:     * @return raportul care contine pe prima pozitie tipul si pe a doua frecventa sa in repository
        -:  111:     */
        -:  112:    [[nodiscard]] unordered_map<string, ReportDTO> raport_tip() const;
        -:  113:
        -:  114:
        -:  115:    /**
        -:  116:     * Functia modifica vectorul out astfel incat sa contina disciplinele filtrate dupa numarul de ore
        -:  117:     * @param ore numarul de ore dupa care se face filtrarea
        -:  118:     * @param out vector de discipline filtrat
        -:  119:     */
        -:  120:    void filtrare_ore(int ore, vector<Disciplina> &out) const;
        -:  121:
        -:  122:    /**
        -:  123:     * Functia modifica vectorul out astfel incat sa contina disciplinele filtrate dupa numele unui profesor
        -:  124:     * @param profesor numele profesorului dupa care se face filtrarea
        -:  125:     * @param out vector de discipline filtrata
        -:  126:     */
        -:  127:    void filtrare_profesor(const string &profesor, vector<Disciplina> &out) const;
        -:  128:
        -:  129:    /**
        -:  130:     * Functia modifica vectorul out astfel incat sa contina diciplinele sortate dupa nume
        -:  131:     * @param out vector de discipline sortata
        -:  132:     */
        -:  133:    void sortare_nume(vector<Disciplina> &out) const;
        -:  134:
        -:  135:    /**
        -:  136:     * Functia modifica vectorul out astfel incat sa contina diciplinele sortate dupa ora
        -:  137:     * @param out vector de discipline sortata
        -:  138:     */
        -:  139:    void sortare_ore(vector<Disciplina> &out) const;
        -:  140:
        -:  141:    /**
        -:  142:     * Functia modifica vectorul out astfel incat sa contina diciplinele sortate dupa profesor, apoi dupa tip
        -:  143:     * @param out vector de discipline sortata
        -:  144:     */
        -:  145:    void sortare_profesor_tip(vector<Disciplina> &out) const;
        -:  146:
        -:  147:
        -:  148:    /**
        -:  149:     * Functia reface lista de discipline sa fie ca inainte de apelarea ultimei comenzi
        -:  150:     * @throws RepoException cu mesajul "Nu mai exista operatii de refacut!" daca nu mai exista comenzi de refacut
        -:  151:     */
        -:  152:    void undo();
        -:  153:
        -:  154:
        -:  155:    /**
        -:  156:     * Functia returneaza o lista cu cuvinte cheie de nu
        -:  157:     * @return o lista cu cuvinte cheie de nu
        -:  158:     */
        -:  159:    [[nodiscard]] static unordered_set<string> no_keywords();
        -:  160:
        -:  161:    /**
        -:  162:     * Functia adauga o disciplina in contract dupa nume si, optional, dupa profesor
        -:  163:     * @param nume numele disciplinei care trebuie adaugata
        -:  164:     * @param profesor numele profesorului principal al disciplinei, sau "" daca nu e specificat
        -:  165:     * @param dorinta dorinta de a adauga un disciplina cu numele nume a unui profesor specific
        -:  166:     * @throw ContractException cu mesajul
        -:  167:     *      - "Disciplina exista deja in contract!", daca disciplina se afla deja in contract
        -:  168:     *      - "Disciplina nu exista in catalog!", daca nu exista o disciplina cu numele nume
        -:  169:     *      - "Exista mai multe discipline cu acest nume. Doriti un profesor anume?: ", daca exista mai multe discipline cu acel nume si nu s-a specificat daca se doreste un profesor
        -:  170:     *      - "Nu exista diciplina cu acel profesor!" daca nu exista o disciplina cu numele nume si cu profesorul profesor
        -:  171:     */
        -:  172:    void contract_adauga(const string &nume, const string &profesor = "", const string &dorinta = "");
        -:  173:
        -:  174:    /**
        -:  175:     * Functia goleste contractul de materii
        -:  176:     * @throw ContractException "Contractul este deja gol!", daca contractul este gol
        -:  177:     */
        -:  178:    void contract_goleste();
        -:  179:
        -:  180:    /**
        -:  181:     * Functia adauga in mod aleator nr dicipline din repository in contract
        -:  182:     * @param nr numarul de discipline care vor fi adaugate
        -:  183:     * @throw ContractException cu mesajul
        -:  184:     *      - "Nu se poate genera un contract cu un numar negativ de discipline!", daca nr e negativ
        -:  185:     *      - "Nu exista atatea discipline in catalog!", daca nr e mai mare decat numarul de discipline din repository
        -:  186:     */
        -:  187:    void contract_generare(int nr);
        -:  188:
        -:  189:    /**
        -:  190:     * Functia returneaza lista de discipline din contract sub forma de vector
        -:  191:     * @return contractul de discipline
        -:  192:     */
        -:  193:    [[nodiscard]] const vector<Disciplina> &contract_getAll() const noexcept;
        -:  194:
        -:  195:
        -:  196:    /**
        -:  197:     * Functia scrie contractul actual in fisierul cu drumul file_path
        -:  198:     * @param file_path drumul catre fisierul in care vrem sa scriem
        -:  199:     * @throw FileException cu mesajul - "Nu s-a putut scrie in fisier!", daca nu se poate scrie in fisier
        -:  200:     */
        -:  201:    void contract_exporta(const string &file_path) const;
        -:  202:};
        -:  203:
        -:  204:
